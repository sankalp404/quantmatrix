FROM node:22-alpine

# Set working directory
WORKDIR /app

# Copy frontend source code (including lockfile) then install.
# This avoids subtle cache/overwrite issues where package-lock.json changes
# but an older layer-installed node_modules remains.
COPY frontend/ .

# Install dependencies (clean install)
RUN npm ci

# Expose port
EXPOSE 3000

# Start development server (compose overrides in dev, but keep a sane default)
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]